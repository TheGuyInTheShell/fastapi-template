<div class="border p-6 rounded-lg bg-gray-50">
    <h3 class="text-lg font-medium mb-4">Configurar Autenticación de Dos Pasos</h3>

    {% if error %}
    <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4" role="alert">
        <span class="block sm:inline">{{ error }}</span>
    </div>
    {% endif %}

    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
        <div class="flex flex-col items-center justify-center">
            <p class="mb-2 text-sm text-gray-700">1. Escanea este código QR con tu aplicación autenticadora (ej. Google
                Authenticator).</p>
            <img src="{{ qr_code }}" alt="QR Code" class="border p-2 bg-white rounded shadow-sm">
            <p class="mt-2 text-xs text-gray-500">Secreto: {{ secret }}</p>
        </div>

        <div class="flex flex-col justify-center">
            <p class="mb-2 text-sm text-gray-700">2. Ingresa el código de 6 dígitos generado por la aplicación.</p>
            <form hx-post="/admin/account/2fa/enable" hx-target="#otp-section" class="flex flex-col gap-3">
                <input type="hidden" name="secret" value="{{ secret }}">
                <input type="text" name="otp_code" placeholder="Ej. 123456"
                    class="border p-2 rounded focus:ring-2 focus:ring-blue-500 outline-none" required
                    autocomplete="off">

                <div class="flex gap-2 mt-2">
                    <button type="submit"
                        class="bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded">
                        Verificar y Activar
                    </button>
                    <button hx-get="/admin/account" hx-target="#otp-section" hx-select="#otp-section"
                        class="bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded">
                        Cancelar
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>